<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>ES6学习笔记 | 嘻哈工程师</title>
    <meta name="description" content="嘻哈工程师的博客">
    <meta name="generator" content="VuePress 1.4.0">
    <script type="text/javascript" src="/baidu-analytics.js" async="async"></script>
  <link rel="icon" href="/icons/favicon.ico">
  <meta name="referrer" content="no-referrer">
  <link rel="manifest" href="/manifest.json">
  <meta name="theme-color" content="#3eaf7c">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <link rel="apple-touch-icon" sizes="192x192" href="/icons/192.png">
  <meta name="msapplication-TileImage" content="/icons/144.png">
  <meta name="msapplication-TileColor" content="#000000">
    
    <link rel="preload" href="/assets/css/0.styles.cb726fc1.css" as="style"><link rel="preload" href="/assets/js/app.01f3d281.js" as="script"><link rel="preload" href="/assets/js/2.8423ab85.js" as="script"><link rel="preload" href="/assets/js/24.807bc40c.js" as="script"><link rel="preload" href="/assets/js/5.d4f27e5e.js" as="script"><link rel="prefetch" href="/assets/js/10.2a40d111.js"><link rel="prefetch" href="/assets/js/11.dd66b123.js"><link rel="prefetch" href="/assets/js/12.78372346.js"><link rel="prefetch" href="/assets/js/13.5131076f.js"><link rel="prefetch" href="/assets/js/14.9fc0f660.js"><link rel="prefetch" href="/assets/js/15.04f9411c.js"><link rel="prefetch" href="/assets/js/16.3f4e2e17.js"><link rel="prefetch" href="/assets/js/17.a20dce7f.js"><link rel="prefetch" href="/assets/js/18.75d487fc.js"><link rel="prefetch" href="/assets/js/19.bd33e900.js"><link rel="prefetch" href="/assets/js/20.eebf06f2.js"><link rel="prefetch" href="/assets/js/21.2f8f329f.js"><link rel="prefetch" href="/assets/js/22.7c1996ff.js"><link rel="prefetch" href="/assets/js/23.280ef3ba.js"><link rel="prefetch" href="/assets/js/25.02fb0e6f.js"><link rel="prefetch" href="/assets/js/26.8543cfe3.js"><link rel="prefetch" href="/assets/js/27.626d0fc9.js"><link rel="prefetch" href="/assets/js/28.805d4b64.js"><link rel="prefetch" href="/assets/js/29.ad8821ac.js"><link rel="prefetch" href="/assets/js/3.4c482df0.js"><link rel="prefetch" href="/assets/js/30.6c8e873c.js"><link rel="prefetch" href="/assets/js/31.a9f030e7.js"><link rel="prefetch" href="/assets/js/32.363dae8a.js"><link rel="prefetch" href="/assets/js/33.7cefb3e4.js"><link rel="prefetch" href="/assets/js/34.f3a78a88.js"><link rel="prefetch" href="/assets/js/35.d3913665.js"><link rel="prefetch" href="/assets/js/36.b2d955d9.js"><link rel="prefetch" href="/assets/js/37.972d7ee8.js"><link rel="prefetch" href="/assets/js/38.7f666f33.js"><link rel="prefetch" href="/assets/js/39.851541e9.js"><link rel="prefetch" href="/assets/js/4.3fcff089.js"><link rel="prefetch" href="/assets/js/40.ff563645.js"><link rel="prefetch" href="/assets/js/41.5c02f77e.js"><link rel="prefetch" href="/assets/js/42.5076b1d2.js"><link rel="prefetch" href="/assets/js/43.5b70637d.js"><link rel="prefetch" href="/assets/js/44.cf0c80b9.js"><link rel="prefetch" href="/assets/js/45.2d04b935.js"><link rel="prefetch" href="/assets/js/46.9b9bf2ee.js"><link rel="prefetch" href="/assets/js/47.14a3e571.js"><link rel="prefetch" href="/assets/js/48.aed5571f.js"><link rel="prefetch" href="/assets/js/49.f021806d.js"><link rel="prefetch" href="/assets/js/50.bba072f8.js"><link rel="prefetch" href="/assets/js/51.bcbbc6ac.js"><link rel="prefetch" href="/assets/js/52.d5f73b48.js"><link rel="prefetch" href="/assets/js/53.338e0cdf.js"><link rel="prefetch" href="/assets/js/54.e1ed212c.js"><link rel="prefetch" href="/assets/js/55.9b0f4ba7.js"><link rel="prefetch" href="/assets/js/56.51b73d7b.js"><link rel="prefetch" href="/assets/js/57.54758db0.js"><link rel="prefetch" href="/assets/js/58.d518ac6c.js"><link rel="prefetch" href="/assets/js/59.77b8404e.js"><link rel="prefetch" href="/assets/js/6.e021ca0d.js"><link rel="prefetch" href="/assets/js/60.05b42029.js"><link rel="prefetch" href="/assets/js/61.d040a298.js"><link rel="prefetch" href="/assets/js/62.ba396458.js"><link rel="prefetch" href="/assets/js/63.caa460ea.js"><link rel="prefetch" href="/assets/js/64.22200b2f.js"><link rel="prefetch" href="/assets/js/65.87890c2a.js"><link rel="prefetch" href="/assets/js/66.33c7f026.js"><link rel="prefetch" href="/assets/js/67.95145695.js"><link rel="prefetch" href="/assets/js/68.e205a016.js"><link rel="prefetch" href="/assets/js/69.87b84815.js"><link rel="prefetch" href="/assets/js/7.ed32b398.js"><link rel="prefetch" href="/assets/js/70.c6e2db3c.js"><link rel="prefetch" href="/assets/js/71.35fe0c6f.js"><link rel="prefetch" href="/assets/js/72.66731680.js"><link rel="prefetch" href="/assets/js/8.63fa3eff.js"><link rel="prefetch" href="/assets/js/9.01b53342.js">
    <link rel="stylesheet" href="/assets/css/0.styles.cb726fc1.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">嘻哈工程师</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/guide/" class="nav-link">
  最新
</a></div><div class="nav-item"><a href="/archives/" class="nav-link">
  归档
</a></div> <a href="https://github.com/shimingw/vpblog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/guide/" class="nav-link">
  最新
</a></div><div class="nav-item"><a href="/archives/" class="nav-link">
  归档
</a></div> <a href="https://github.com/shimingw/vpblog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>ES6</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/2019-01-13-JavaScript-ES6-ES6学习笔记/" class="active sidebar-link">ES6</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/2019-01-13-JavaScript-ES6-ES6学习笔记/#es6-声明变量的六种方法" class="sidebar-link">ES6 声明变量的六种方法</a></li><li class="sidebar-sub-header"><a href="/docs/2019-01-13-JavaScript-ES6-ES6学习笔记/#map-的-for-of-循环" class="sidebar-link">Map 的 for of 循环</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/2019-01-13-JavaScript-ES6-ES6学习笔记/#尾调用的使用及优化" class="sidebar-link">尾调用的使用及优化</a></li><li class="sidebar-sub-header"><a href="/docs/2019-01-13-JavaScript-ES6-ES6学习笔记/#尾递归" class="sidebar-link">尾递归</a></li></ul></li><li class="sidebar-sub-header"><a href="/docs/2019-01-13-JavaScript-ES6-ES6学习笔记/#weakmap" class="sidebar-link">WeakMap</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/2019-01-13-JavaScript-ES6-ES6学习笔记/#这两个章节没有细看" class="sidebar-link">这两个章节没有细看</a></li><li class="sidebar-sub-header"><a href="/docs/2019-01-13-JavaScript-ES6-ES6学习笔记/#类的-prototype-属性和proto属性" class="sidebar-link">类的 prototype 属性和proto属性</a></li><li class="sidebar-sub-header"><a href="/docs/2019-01-13-JavaScript-ES6-ES6学习笔记/#extends-的继承目标" class="sidebar-link">extends 的继承目标</a></li><li class="sidebar-sub-header"><a href="/docs/2019-01-13-JavaScript-ES6-ES6学习笔记/#实例的-proto-属性" class="sidebar-link">实例的 proto 属性</a></li><li class="sidebar-sub-header"><a href="/docs/2019-01-13-JavaScript-ES6-ES6学习笔记/#原生构造函数的继承" class="sidebar-link">原生构造函数的继承</a></li><li class="sidebar-sub-header"><a href="/docs/2019-01-13-JavaScript-ES6-ES6学习笔记/#_1、概述" class="sidebar-link">1、概述</a></li><li class="sidebar-sub-header"><a href="/docs/2019-01-13-JavaScript-ES6-ES6学习笔记/#_3、export-命令" class="sidebar-link">3、export 命令</a></li><li class="sidebar-sub-header"><a href="/docs/2019-01-13-JavaScript-ES6-ES6学习笔记/#_4、import-命令" class="sidebar-link">4、import 命令</a></li><li class="sidebar-sub-header"><a href="/docs/2019-01-13-JavaScript-ES6-ES6学习笔记/#_5、模块的整体加载" class="sidebar-link">5、模块的整体加载</a></li><li class="sidebar-sub-header"><a href="/docs/2019-01-13-JavaScript-ES6-ES6学习笔记/#_6、export-default-命令" class="sidebar-link">6、export default 命令</a></li><li class="sidebar-sub-header"><a href="/docs/2019-01-13-JavaScript-ES6-ES6学习笔记/#_7、export-与-import-的复合写法" class="sidebar-link">7、export 与 import 的复合写法</a></li></ul></li></ul></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>React</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/2019-06-06-JavaScript-React-React学习笔记/" class="sidebar-link">React学习笔记</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Vue</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/2017-09-06-JavaScript-Vue-Vue笔记/" class="sidebar-link">vue笔记</a></li><li><a href="/docs/2018-07-13-JavaScript-Vue-vue-cli3/" class="sidebar-link">vue-cli3</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>其他</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/2019-10-29-JavaScript-其他-深入浅出lodash/" class="sidebar-link">深入浅出lodash</a></li><li><a href="/docs/2019-10-24-JavaScript-其他-代码质量规范/" class="sidebar-link">代码规范</a></li><li><a href="/docs/2018-07-03-JavaScript-其他-函数式编程/" class="sidebar-link">函数式编程</a></li><li><a href="/docs/2018-04-06-JavaScript-其他-深入了解NodeList与HTMLCollection/" class="sidebar-link">深入了解NodeList与HTMLCollection</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>书籍学习笔记</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/2018-07-17-JavaScript-书籍学习笔记-JavaScript设计模式/" class="sidebar-link">JavaScript设计模式—笔记</a></li><li><a href="/docs/2020-01-09-JavaScript-书籍学习笔记-javaScript语言精粹—笔记/" class="sidebar-link">JavaScript语言精粹—笔记</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="es6"><a href="#es6" class="header-anchor">#</a> ES6</h1> <h2 id="es6-声明变量的六种方法"><a href="#es6-声明变量的六种方法" class="header-anchor">#</a> ES6 声明变量的六种方法</h2> <p>ES5 只有两种声明变量的方法：<code>var</code>命令和<code>function</code>命令。ES6 除了添加<code>let</code>和<code>const</code>命令，后面章节还会提到，另外两种声明变量的方法：<code>import</code>命令和<code>class</code>命令。所以，ES6 一共有 6 种声明变量的方法。</p> <h2 id="map-的-for-of-循环"><a href="#map-的-for-of-循环" class="header-anchor">#</a> Map 的 for of 循环</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
map<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&quot;first&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;hello&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
map<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&quot;second&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;world&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> <span class="token punctuation">[</span>key<span class="token punctuation">,</span> value<span class="token punctuation">]</span> <span class="token keyword">of</span> map<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>key <span class="token operator">+</span> <span class="token string">&quot;  is  &quot;</span> <span class="token operator">+</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h1 id="函数的扩展"><a href="#函数的扩展" class="header-anchor">#</a> [函数的扩展]</h1> <p>1、函数传参，可以设置默认参数</p> <p>2、引入 rest 参数代替 arguments 对象</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>values</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> sum <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> val <span class="token keyword">of</span> values<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    sum <span class="token operator">+=</span> val<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> sum<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">add</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 10</span>
</code></pre></div><p>3、字符串</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token number">3.1</span>可以将传入的字符串解析成数组
<span class="token keyword">function</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token parameter">str</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">...</span>str<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token operator">...</span>str<span class="token punctuation">]</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;qwe&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token number">3.2</span>使用<span class="token operator">...</span>解析字符串与split解析。
<span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token string">'x\uD83D\uDE80y'</span><span class="token punctuation">;</span>
str<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">reverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span>
<span class="token punctuation">[</span><span class="token operator">...</span>str<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">reverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span>

<span class="token number">3.3</span>实现了Iterator接口的对象
实现了Iterator接口的对象可以直接使用<span class="token punctuation">[</span><span class="token operator">...</span><span class="token punctuation">]</span>来转化成数组
<span class="token keyword">var</span> nodeList <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> array <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>nodeList<span class="token punctuation">]</span><span class="token punctuation">;</span>
没有部署Iterator的对象
比如

</code></pre></div><p>4、箭头函数</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token number">4.1</span>箭头函数中的<span class="token keyword">this</span>指向定义时所在的作用域
es5的匿名函数中的<span class="token keyword">this</span>指向运行时所在的作用域

<span class="token keyword">var</span> handler <span class="token operator">=</span> <span class="token punctuation">{</span>
        id<span class="token operator">:</span> <span class="token string">'123456'</span><span class="token punctuation">,</span>
        <span class="token function-variable function">init</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token parameter">event</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">doSomething</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>type<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function-variable function">initSec</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">doSomething</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>type<span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>

        <span class="token function-variable function">doSomething</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">type</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Handling '</span> <span class="token operator">+</span> type  <span class="token operator">+</span> <span class="token string">' for '</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

handler<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
handler<span class="token punctuation">.</span><span class="token function">initSec</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token number">4.2</span>  arguments、<span class="token keyword">super</span>、<span class="token keyword">new</span><span class="token punctuation">.</span>target 在箭头函数中不存在
<span class="token number">4.3</span>  <span class="token function">箭头函数不能用call</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token function">、apply</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token function">、bind</span><span class="token punctuation">(</span><span class="token punctuation">)</span>这些方法去改变<span class="token keyword">this</span>的指向
</code></pre></div><h3 id="尾调用的使用及优化"><a href="#尾调用的使用及优化" class="header-anchor">#</a> 尾调用的使用及优化</h3> <div class="language-js extra-class"><pre class="language-js"><code>尾调用不需要保存外部函数的调用帧，可以提高性能
最后返回的是一个函数

我们知道，函数调用会在内存形成一个“调用记录”，又称“调用帧”（call frame），保存调用位置和内部变量等信息。如果在函数<span class="token constant">A</span>的内部调用函数<span class="token constant">B</span>，那么在<span class="token constant">A</span>的调用帧上方，还会形成一个<span class="token constant">B</span>的调用帧。等到<span class="token constant">B</span>运行结束，将结果返回到<span class="token constant">A</span>，<span class="token constant">B</span>的调用帧才会消失。如果函数<span class="token constant">B</span>内部还调用函数<span class="token constant">C</span>，那就还有一个<span class="token constant">C</span>的调用帧，以此类推。所有的调用帧，就形成一个“调用栈”（call stack）。
尾调用由于是函数的最后一步操作，所以不需要保留外层函数的调用帧，因为调用位置、内部变量等信息都不会再用到了，只要直接用内层函数的调用帧，取代外层函数的调用帧就可以了。
</code></pre></div><h3 id="尾递归"><a href="#尾递归" class="header-anchor">#</a> 尾递归</h3> <div class="language-js extra-class"><pre class="language-js"><code>这种递归需要保存n个调用记录，会占用过多的内存
<span class="token keyword">function</span> <span class="token function">factorial</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> n <span class="token operator">*</span> <span class="token function">factorial</span><span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">factorial</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span> <span class="token comment">// 120</span>

尾递归调用方法
返回的函数中total用来保存结果值
<span class="token keyword">function</span> <span class="token function">factorial</span><span class="token punctuation">(</span><span class="token parameter">n<span class="token punctuation">,</span> total</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">return</span> total<span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token function">factorial</span><span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> n <span class="token operator">*</span> total<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><h1 id="数组的扩展"><a href="#数组的扩展" class="header-anchor">#</a> 数组的扩展</h1> <div class="language-js extra-class"><pre class="language-js"><code>copyWithin<span class="token punctuation">,</span>拷贝数组
<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">copyWithin</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> start <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> end <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 和 <span class="token function">findIndex</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
find<span class="token operator">:</span>可以过滤筛选数组
findIndex<span class="token operator">:</span>返回第一个匹配中的数组中值得index
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token function">fill</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span>使用给定值填充数组
fill方法还可以接受第二个和第三个参数，用于指定填充的起始位置和结束位置。
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>
<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token function">，keys</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 和 <span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
三种数组的遍历方法
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> <span class="token punctuation">[</span>index<span class="token punctuation">,</span> elem<span class="token punctuation">]</span> <span class="token keyword">of</span> <span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> elem<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token function">includes</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
查看数组中是否含有该值，返回布尔值
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 方法
如果<span class="token keyword">return</span> <span class="token boolean">true</span>则保留
如果<span class="token keyword">return</span> <span class="token boolean">false</span>则不保留
array<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token operator">/</span><span class="token boolean">true</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h1 id="对象的扩展"><a href="#对象的扩展" class="header-anchor">#</a> 对象的扩展</h1> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> cart <span class="token operator">=</span> <span class="token punctuation">{</span>
  _wheels<span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span>

  <span class="token keyword">get</span> <span class="token function">wheels</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_wheels<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token keyword">set</span> <span class="token function">wheels</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">&lt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_wheels<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&quot;数值太小了！&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>_wheels <span class="token operator">=</span> value<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>cart<span class="token punctuation">.</span>_wheels<span class="token punctuation">)</span><span class="token punctuation">;</span>

cart<span class="token punctuation">.</span>wheels <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>注意，属性名表达式如果是一个对象，默认情况下会自动将对象转为字符串<span class="token punctuation">[</span>object Object<span class="token punctuation">]</span>，这一点要特别小心。
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>getOwnPropertyDescriptor
获取对象上某个属性的，默认熟悉
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>Object<span class="token punctuation">.</span><span class="token function">is</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
比较两个值是否完全相等
相等运算符（<span class="token operator">==</span>）和严格相等运算符（<span class="token operator">===</span>）。它们都有缺点，前者会自动转换数据类型，后者的<span class="token number">NaN</span>不等于自身，以及<span class="token operator">+</span><span class="token number">0</span>等于<span class="token operator">-</span><span class="token number">0</span>
Object<span class="token punctuation">.</span><span class="token function">is</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">,</span> <span class="token string">'foo'</span><span class="token punctuation">)</span>完美解决了这个问题
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
对象合并方法，第一个参数是目标对象，后面的参数都是源对象。
也可以用作对象拷贝。是浅拷贝，得到一个该对象的引用

<span class="token number">1</span>、可以为对象添加属性
    <span class="token keyword">class</span> <span class="token class-name">Point</span> <span class="token punctuation">{</span>
      <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>x<span class="token punctuation">,</span> y<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token number">2</span>、可以为对象添加方法
    Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token class-name">SomeClass</span><span class="token punctuation">.</span>prototype<span class="token punctuation">,</span> <span class="token punctuation">{</span>
      <span class="token function">someMethod</span><span class="token punctuation">(</span><span class="token parameter">arg1<span class="token punctuation">,</span> arg2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        ···
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token function">anotherMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        ···
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>getPrototypeOf 从对象捕获原型。从而给原型添加方法
<span class="token keyword">var</span> spaghetti <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Pasta</span><span class="token punctuation">(</span><span class="token string">&quot;wheat&quot;</span><span class="token punctuation">,</span> <span class="token number">0.2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Obtain the prototype from the object.</span>
<span class="token keyword">var</span> proto <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">getPrototypeOf</span><span class="token punctuation">(</span>spaghetti<span class="token punctuation">)</span><span class="token punctuation">;</span>
另外，<span class="token constant">ES6</span>规定，所有Class的原型的方法都是不可枚举的。
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>属性的遍历
<span class="token number">1</span>、<span class="token keyword">for</span><span class="token operator">...</span><span class="token keyword">in</span>
<span class="token keyword">for</span><span class="token operator">...</span><span class="token keyword">in</span>循环遍历对象自身的和继承的可枚举属性（不含 Symbol 属性）。
<span class="token number">2</span>、Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>
Object<span class="token punctuation">.</span>keys返回一个数组，包括对象自身的（不含继承的）所有可枚举属性（不含 Symbol 属性）。
<span class="token number">3</span>、Object<span class="token punctuation">.</span><span class="token function">getOwnPropertyNames</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>
Object<span class="token punctuation">.</span>getOwnPropertyNames返回一个数组，包含对象自身的所有属性（不含 Symbol 属性，但是包括不可枚举属性）。
<span class="token number">4</span>、Object<span class="token punctuation">.</span><span class="token function">getOwnPropertySymbols</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>
Object<span class="token punctuation">.</span>getOwnPropertySymbols返回一个数组，包含对象自身的所有 Symbol 属性。
<span class="token number">5</span>、Reflect<span class="token punctuation">.</span><span class="token function">ownKeys</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>
Reflect<span class="token punctuation">.</span>ownKeys返回一个数组，包含对象自身的所有属性，不管属性名是 Symbol 或字符串，也不管是否可枚举。
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>获取已数组的形式获取对象的所有值
Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span>获取所有key
Object<span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span>获取所有value
Object<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span>获取所有key和value
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>Null传导运算符
<span class="token keyword">const</span> firstName <span class="token operator">=</span> message<span class="token operator">?.</span>body<span class="token operator">?.</span>user<span class="token operator">?.</span>firstName <span class="token operator">||</span> <span class="token string">'default'</span><span class="token punctuation">;</span>
上面代码有三个<span class="token operator">?.</span>运算符，只要其中一个返回<span class="token keyword">null</span>或<span class="token keyword">undefined</span>，就不再往下运算，而是返回<span class="token keyword">undefined</span>。
</code></pre></div><h1 id="symbol"><a href="#symbol" class="header-anchor">#</a> Symbol</h1> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> s1 <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> s2 <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Object<span class="token punctuation">.</span><span class="token function">is</span><span class="token punctuation">(</span>s1<span class="token punctuation">,</span> s2<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//false</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>作为属性名的 Symbol
<span class="token keyword">var</span> mySymbol <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 第一种写法</span>
<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
a<span class="token punctuation">[</span>mySymbol<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'Hello!'</span><span class="token punctuation">;</span>

<span class="token comment">// 第二种写法</span>
<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span>mySymbol<span class="token punctuation">]</span><span class="token operator">:</span> <span class="token string">'Hello!'</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 第三种写法</span>
<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> mySymbol<span class="token punctuation">,</span> <span class="token punctuation">{</span> value<span class="token operator">:</span> <span class="token string">'Hello!'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 以上写法都得到同样结果</span>
a<span class="token punctuation">[</span>mySymbol<span class="token punctuation">]</span> <span class="token comment">// &quot;Hello!&quot;</span>
</code></pre></div><h1 id="set-和-map-数据结构"><a href="#set-和-map-数据结构" class="header-anchor">#</a> Set 和 Map 数据结构</h1> <div class="language-js extra-class"><pre class="language-js"><code>提供了新的数据结构 Set。它类似于数组，但是成员的值都是唯一的，没有重复的值。
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>Set 实例的属性和方法：
<span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token function">add</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>：		添加某个值，返回Set结构本身。
<span class="token keyword">delete</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>：	删除某个值，返回一个布尔值，表示删除是否成功。
<span class="token function">has</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>：		返回一个布尔值，表示该值是否为Set的成员。
<span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span>：		清除所有成员，没有返回值。
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>Array<span class="token punctuation">.</span>from方法可以将 Set 结构转为数组。
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>遍历操作：
<span class="token function">keys</span><span class="token punctuation">(</span><span class="token punctuation">)</span>：		返回键名的遍历器
<span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span>：	返回键值的遍历器
<span class="token function">entries</span><span class="token punctuation">(</span><span class="token punctuation">)</span>：	返回键值对的遍历器
<span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">)</span>：	使用回调函数遍历每个成员
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>WeakSet：
<span class="token keyword">new</span> <span class="token class-name">WeakSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token class-name">WeakSet</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>：向 WeakSet 实例添加一个新成员。
<span class="token class-name">WeakSet</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>：清除 WeakSet 实例的指定成员。
<span class="token class-name">WeakSet</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>：返回一个布尔值，表示某个值是否在 WeakSet 实例之中。

</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>Map：
<span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
json一定要使用字符串作为key值
map可以使用对象作为key值

<span class="token keyword">const</span> m <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> o <span class="token operator">=</span> <span class="token punctuation">{</span>p<span class="token operator">:</span> <span class="token string">'Hello World'</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
m<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span> <span class="token string">'content'</span><span class="token punctuation">)</span>
m<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span> <span class="token comment">// &quot;content&quot;</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">[</span><span class="token punctuation">]</span>传值、<span class="token operator">...</span>传值  方法
<span class="token keyword">const</span> items <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">,</span> <span class="token string">'张三'</span><span class="token punctuation">,</span><span class="token number">111111</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token string">'title'</span><span class="token punctuation">,</span> <span class="token string">'Author'</span><span class="token punctuation">,</span><span class="token number">22222222</span><span class="token punctuation">]</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
items<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">[</span>a1<span class="token punctuation">,</span>a2<span class="token punctuation">,</span>a3<span class="token punctuation">]</span><span class="token punctuation">,</span>b<span class="token punctuation">,</span>c</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span>a1<span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span>a2<span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span>a3<span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;b&quot;</span><span class="token punctuation">,</span>b<span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;c&quot;</span><span class="token punctuation">,</span>c<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
items<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>key</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="weakmap"><a href="#weakmap" class="header-anchor">#</a> WeakMap</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> wm1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WeakMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> key <span class="token operator">=</span> <span class="token punctuation">{</span> foo<span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
wm1<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
wm1<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>WeakMap与Map的区别有两点<span class="token operator">:</span>
<span class="token number">1</span>、WeakMap只接受对象作为键名（<span class="token keyword">null</span>除外），不接受其他类型的值作为键名。
<span class="token number">2</span>、WeakMap的键名所指向的对象，不计入垃圾回收机制。
<span class="token number">3</span>、没有遍历操作，没有size属性
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>WeakMap的设计目的<span class="token operator">:</span>
有时我们想在某个对象上面存放一些数据，但是这会形成对于这个对象的引用
一旦不再需要这两个对象，我们就必须手动删除这个引用，否则垃圾回收机制就不会释放内存。
内部机制<span class="token operator">:</span>
它的键名所引用的对象都是弱引用，即垃圾回收机制不将该引用考虑在内。因此，只要所引用的对象的其他引用都被清除，垃圾回收机制就会释放该对象所占用的内存。也就是说，一旦不再需要，WeakMap 里面的键名对象和所对应的键值对会自动消失，不用手动删除引用。
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>WeakMap 应用的典型场合就是 <span class="token constant">DOM</span> 节点作为键名
使用weakmap为元素添加事件，当元素被移除后该事件会自动移除，不会造成内存泄漏
<span class="token keyword">const</span> listener <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WeakMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

listener<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>element1<span class="token punctuation">,</span> handler1<span class="token punctuation">)</span><span class="token punctuation">;</span>
listener<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>element2<span class="token punctuation">,</span> handler2<span class="token punctuation">)</span><span class="token punctuation">;</span>

element1<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> listener<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>element1<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
element2<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> listener<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>element2<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><h1 id="proxy"><a href="#proxy" class="header-anchor">#</a> Proxy</h1> <div class="language-js extra-class"><pre class="language-js"><code>概述<span class="token operator">:</span>
Proxy 可以理解成，在目标对象之前架设一层“拦截”，外界对该对象的访问，都必须先通过这层拦截，因此提供了一种机制，可以对外界的访问进行过滤和改写。
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> proxy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> handler<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span><span class="token punctuation">)</span>表示生成一个Proxy实例
target<span class="token operator">:</span>参数表示所要拦截的目标对象<span class="token punctuation">.</span>
handler<span class="token operator">:</span>参数也是一个对象，用来定制拦截行为。
例如<span class="token operator">:</span>
<span class="token keyword">var</span> proxy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">get</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">target<span class="token punctuation">,</span> property</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token number">35</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>拦截方法<span class="token operator">:</span>
（<span class="token number">1</span>）<span class="token keyword">get</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> propKey<span class="token punctuation">,</span> receiver<span class="token punctuation">)</span>

拦截对象属性的读取，比如proxy<span class="token punctuation">.</span>foo和proxy<span class="token punctuation">[</span><span class="token string">'foo'</span><span class="token punctuation">]</span>。

最后一个参数receiver是一个对象，可选，参见下面Reflect<span class="token punctuation">.</span>get的部分。

（<span class="token number">2</span>）<span class="token keyword">set</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> propKey<span class="token punctuation">,</span> value<span class="token punctuation">,</span> receiver<span class="token punctuation">)</span>

拦截对象属性的设置，比如proxy<span class="token punctuation">.</span>foo <span class="token operator">=</span> v或proxy<span class="token punctuation">[</span><span class="token string">'foo'</span><span class="token punctuation">]</span> <span class="token operator">=</span> v，返回一个布尔值。

<span class="token function">（3）has</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> propKey<span class="token punctuation">)</span>

拦截propKey <span class="token keyword">in</span> proxy的操作，返回一个布尔值。

<span class="token function">（4）deleteProperty</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> propKey<span class="token punctuation">)</span>

拦截<span class="token keyword">delete</span> proxy<span class="token punctuation">[</span>propKey<span class="token punctuation">]</span>的操作，返回一个布尔值。

<span class="token function">（5）ownKeys</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span>

拦截Object<span class="token punctuation">.</span><span class="token function">getOwnPropertyNames</span><span class="token punctuation">(</span>proxy<span class="token punctuation">)</span>、Object<span class="token punctuation">.</span><span class="token function">getOwnPropertySymbols</span><span class="token punctuation">(</span>proxy<span class="token punctuation">)</span>、Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>proxy<span class="token punctuation">)</span>，返回一个数组。该方法返回目标对象所有自身的属性的属性名，而Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token punctuation">)</span>的返回结果仅包括目标对象自身的可遍历属性。

<span class="token function">（6）getOwnPropertyDescriptor</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> propKey<span class="token punctuation">)</span>

拦截Object<span class="token punctuation">.</span><span class="token function">getOwnPropertyDescriptor</span><span class="token punctuation">(</span>proxy<span class="token punctuation">,</span> propKey<span class="token punctuation">)</span>，返回属性的描述对象。

<span class="token function">（7）defineProperty</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> propKey<span class="token punctuation">,</span> propDesc<span class="token punctuation">)</span>

拦截Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>proxy<span class="token punctuation">,</span> propKey<span class="token punctuation">,</span> propDesc）、Object<span class="token punctuation">.</span><span class="token function">defineProperties</span><span class="token punctuation">(</span>proxy<span class="token punctuation">,</span> propDescs<span class="token punctuation">)</span>，返回一个布尔值。

<span class="token function">（8）preventExtensions</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span>

拦截Object<span class="token punctuation">.</span><span class="token function">preventExtensions</span><span class="token punctuation">(</span>proxy<span class="token punctuation">)</span>，返回一个布尔值。

<span class="token function">（9）getPrototypeOf</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span>

拦截Object<span class="token punctuation">.</span><span class="token function">getPrototypeOf</span><span class="token punctuation">(</span>proxy<span class="token punctuation">)</span>，返回一个对象。

<span class="token function">（10）isExtensible</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span>

拦截Object<span class="token punctuation">.</span><span class="token function">isExtensible</span><span class="token punctuation">(</span>proxy<span class="token punctuation">)</span>，返回一个布尔值。

<span class="token function">（11）setPrototypeOf</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> proto<span class="token punctuation">)</span>

拦截Object<span class="token punctuation">.</span><span class="token function">setPrototypeOf</span><span class="token punctuation">(</span>proxy<span class="token punctuation">,</span> proto<span class="token punctuation">)</span>，返回一个布尔值。

如果目标对象是函数，那么还有两种额外操作可以拦截。

<span class="token function">（12）apply</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> object<span class="token punctuation">,</span> args<span class="token punctuation">)</span>

拦截 Proxy <span class="token function">实例作为函数调用的操作，比如proxy</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token function">、proxy</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>object<span class="token punctuation">,</span> <span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token function">、proxy</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token operator">...</span><span class="token punctuation">)</span>。

<span class="token function">（13）construct</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> args<span class="token punctuation">)</span>

拦截 Proxy 实例作为构造函数调用的操作，比如<span class="token keyword">new</span> <span class="token class-name">proxy</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span>。
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span>可以继承proxy对象的规则
<span class="token keyword">let</span> obj <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>proto<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h1 id="reflect"><a href="#reflect" class="header-anchor">#</a> Reflect</h1> <div class="language-js extra-class"><pre class="language-js"><code>Reflect对象的方法与Proxy对象的方法一一对应，只要是Proxy对象的方法，就能在Reflect对象上找到对应的方法。这就让Proxy对象可以方便地调用对应的Reflect方法，完成默认行为，作为修改行为的基础。也就是说，不管Proxy怎么修改默认行为，你总可以在Reflect上获取默认行为
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>静态方法<span class="token operator">:</span>
Reflect对象一共有<span class="token number">13</span>个静态方法。
  <span class="token function">Reflect</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span>thisArg<span class="token punctuation">,</span>args<span class="token punctuation">)</span>
  Reflect<span class="token punctuation">.</span><span class="token function">construct</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span>args<span class="token punctuation">)</span>
  Reflect<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span>name<span class="token punctuation">,</span>receiver<span class="token punctuation">)</span>
  Reflect<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span>name<span class="token punctuation">,</span>value<span class="token punctuation">,</span>receiver<span class="token punctuation">)</span>
  Reflect<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span>name<span class="token punctuation">,</span>desc<span class="token punctuation">)</span>
  Reflect<span class="token punctuation">.</span><span class="token function">deleteProperty</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span>name<span class="token punctuation">)</span>
  Reflect<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span>name<span class="token punctuation">)</span>
  Reflect<span class="token punctuation">.</span><span class="token function">ownKeys</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span>
  Reflect<span class="token punctuation">.</span><span class="token function">isExtensible</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span>
  Reflect<span class="token punctuation">.</span><span class="token function">preventExtensions</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span>
  Reflect<span class="token punctuation">.</span><span class="token function">getOwnPropertyDescriptor</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> name<span class="token punctuation">)</span>
  Reflect<span class="token punctuation">.</span><span class="token function">getPrototypeOf</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span>
  Reflect<span class="token punctuation">.</span><span class="token function">setPrototypeOf</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> prototype<span class="token punctuation">)</span>
</code></pre></div><h1 id="promise-对象"><a href="#promise-对象" class="header-anchor">#</a> Promise 对象</h1> <div class="language-js extra-class"><pre class="language-js"><code>使用方法<span class="token operator">:</span> <span class="token keyword">var</span> promise <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token number">1111111111</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token function">reject</span><span class="token punctuation">(</span><span class="token number">2222222222</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

执行<span class="token operator">:</span> promise<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
  <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// success</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;value&quot;</span><span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// failure</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;error&quot;</span><span class="token punctuation">,</span> error<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
或者这么写<span class="token punctuation">;</span>
promise
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// success</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;value&quot;</span><span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">error</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// failure</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;error&quot;</span><span class="token punctuation">,</span> error<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token class-name">Promise</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
在then的方法里    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'test'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 会被catch捕捉到。
then方法的第一个参数是Resolved状态的回调函数，第二个参数（可选）是Rejected状态的回调函数
promise<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// success</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;value&quot;</span><span class="token punctuation">,</span>value<span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token string">&quot;akjshdajksdh&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">json</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;json&quot;</span><span class="token punctuation">,</span>json<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">error</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// failure</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;error&quot;</span><span class="token punctuation">,</span>error<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>如果Promise状态已经变成Resolved，再抛出错误是无效的。
只能在then里抛出
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>Promise<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token function">如果使用all</span><span class="token punctuation">(</span><span class="token punctuation">)</span>，就不需要再每个promise实例中写cathc方法。
Promise<span class="token punctuation">.</span>all方法接受一个数组作为参数，p1、p2、p3都是 Promise 实例（Promise<span class="token punctuation">.</span>all方法的参数可以不是数组，但必须具有 Iterator 接口，且返回的每个成员都是 Promise 实例。）
例子<span class="token operator">:</span>
<span class="token keyword">const</span> databasePromise <span class="token operator">=</span> <span class="token function">connectDatabase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> booksPromise <span class="token operator">=</span> databasePromise
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>findAllBooks<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> userPromise <span class="token operator">=</span> databasePromise
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>getCurrentUser<span class="token punctuation">)</span><span class="token punctuation">;</span>
Promise<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  booksPromise<span class="token punctuation">,</span>
  userPromise
<span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">[</span>books<span class="token punctuation">,</span> user<span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">pickTopRecommentations</span><span class="token punctuation">(</span>books<span class="token punctuation">,</span> user<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
上面代码中，booksPromise和userPromise是两个异步操作，只有等到它们的结果都返回了，才会触发pickTopRecommentations这个回调函数。
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>Promise<span class="token punctuation">.</span><span class="token function">race</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> p <span class="token operator">=</span> Promise<span class="token punctuation">.</span><span class="token function">race</span><span class="token punctuation">(</span><span class="token punctuation">[</span>p1<span class="token punctuation">,</span> p2<span class="token punctuation">,</span> p3<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
上面代码中，只要p1、p2、p3之中有一个实例率先改变状态，p的状态就跟着改变。那个率先改变的 Promise 实例的返回值，就传递给p的回调函数。
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
作用<span class="token operator">:</span>将现有对象转为Promise对象<span class="token punctuation">.</span>
（<span class="token number">1</span>）参数是一个Promise实例<span class="token operator">:</span>
如果参数是Promise实例，那么Promise<span class="token punctuation">.</span>resolve将不做任何修改、原封不动地返回这个实例。
（<span class="token number">2</span>）参数是一个thenable对象
thenable对象指的是具有then方法的对象，比如下面这个对象。
<span class="token keyword">let</span> thenable <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">then</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token number">42</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
（<span class="token number">3</span>）参数不是具有then方法的对象，或根本就不是对象<span class="token operator">:</span>
如果参数是一个原始值，或者是一个不具有then方法的对象，则Promise<span class="token punctuation">.</span>resolve方法返回一个新的Promise对象，状态为Resolved。
<span class="token keyword">var</span> p <span class="token operator">=</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'Hello'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
p<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">s</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span>		<span class="token comment">//Hello</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span>reason<span class="token punctuation">)</span>方法也会返回一个新的 Promise 实例，该实例的状态为rejected
与上述的方法类似
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token function">done</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token function">方法</span>	<span class="token punctuation">(</span>问题！！！！<span class="token punctuation">)</span>
done方法，总是处于回调链的尾端，保证抛出任何可能出现的错误。
  <span class="token function">asyncFunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>f1<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span>r1<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>f2<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">done</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">finally</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 	<span class="token punctuation">(</span>问题！！！！<span class="token punctuation">)</span>
finally方法用于指定不管Promise对象最后状态如何，都会执行的操作。它与done方法的最大区别，它接受一个普通的回调函数作为参数，该函数不管怎样都必须执行。
</code></pre></div><h1 id="iterator-和-for-of-循环"><a href="#iterator-和-for-of-循环" class="header-anchor">#</a> Iterator 和 for...of 循环</h1> <div class="language-js extra-class"><pre class="language-js"><code>任意一个对象的Symbol<span class="token punctuation">.</span>iterator方法，等于该对象的遍历器生成函数，调用该函数会返回该对象的一个遍历器对象。
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>
必须具备Iterator属性的对象才可以使用<span class="token keyword">for</span> <span class="token keyword">of</span>循环
<span class="token number">1</span>、数组。
	<span class="token function">配合keys</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token function">，values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token function">，entries</span><span class="token punctuation">(</span><span class="token punctuation">)</span>丰富<span class="token keyword">for</span><span class="token operator">--</span><span class="token keyword">of</span>遍历的方法
<span class="token number">2</span>、字符串
	每个字符串被当做一个值来进行遍历
<span class="token number">3</span>、对象
	<span class="token function">必须配合object下的keys</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token function">，values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token function">，entries</span><span class="token punctuation">(</span><span class="token punctuation">)</span>方法，对对象进行转换，对转换后值得值进行遍历。
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>NodeList对象<span class="token operator">:</span>
节点的集合
具备Iterator接口并且具备数组所拥有的属性
但是是死的对象，不会因为节点跟新而变化

HTMLCollection对象<span class="token operator">:</span>
具备Iterator接口<span class="token punctuation">,</span>但是不具备数组的属性
但他是活的<span class="token punctuation">;</span> 当底层文档更改时，它会自动更新。
</code></pre></div><h1 id="generator-函数的语法"><a href="#generator-函数的语法" class="header-anchor">#</a> Generator 函数的语法</h1> <div class="language-js extra-class"><pre class="language-js"><code>Generator 函数是一个普通函数，但是有两个特征<span class="token operator">:</span>
一是，<span class="token keyword">function</span>关键字与函数名之间有一个星号；
二是，函数体内部使用<span class="token keyword">yield</span>表达式，定义不同的内部状态

知识点<span class="token operator">:</span>
Generator只有调用next方法时，函数才会执行。

</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>方法可以传值
用来表示上文中<span class="token keyword">yield</span>的值
</code></pre></div><h3 id="这两个章节没有细看"><a href="#这两个章节没有细看" class="header-anchor">#</a> 这两个章节没有细看</h3> <div class="language-js extra-class"><pre class="language-js"><code>Generator 函数的语法
Generator 函数的异步应用
</code></pre></div><h1 id="class-的基本语法"><a href="#class-的基本语法" class="header-anchor">#</a> Class 的基本语法</h1> <div class="language-js extra-class"><pre class="language-js"><code><span class="token constant">ES6</span> 的<span class="token keyword">class</span>可以看作只是一个语法糖，它的绝大部分功能，<span class="token constant">ES5</span> 都可以做到，新的<span class="token keyword">class</span>写法只是让对象原型的写法更加清晰、更像面向对象编程的语法而已。
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>constructor 方法
通过<span class="token keyword">new</span>命令生成对象实例时，自动调用该方法
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>类的实例对象
实例的属性除非显式定义在其本身（即定义在<span class="token keyword">this</span>对象上），否则都是定义在原型上（即定义在<span class="token keyword">class</span>上）
constructor中定义的属性方法在其本身
其他的属性方法都在<span class="token keyword">class</span>上
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>Class 表达式
这个类的名字是MyClass而不是Me，Me只在 Class 的内部代码可用，指代当前类
<span class="token keyword">const</span> MyClass <span class="token operator">=</span> <span class="token keyword">class</span> <span class="token class-name">Me</span> <span class="token punctuation">{</span>
  <span class="token function">getClassName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> Me<span class="token punctuation">.</span>name<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>Class 的取值函数（getter）和存值函数（setter）
<span class="token keyword">class</span> <span class="token class-name">MyClass</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">get</span> <span class="token function">prop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">'getter'</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">set</span> <span class="token function">prop</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'setter: '</span><span class="token operator">+</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>Class 的 Generator 方法
如果某个方法之前加上星号（<span class="token operator">*</span>），就表示该方法是一个 Generator 函数。
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>Class 的静态方法
如果在一个方法前，加上<span class="token keyword">static</span>关键字，就表示该方法不会被实例继承，而是直接通过类来调用，这就称为“静态方法”。
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token function">静态属性添加方法</span><span class="token punctuation">(</span>不能被继承<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">class</span> <span class="token class-name">Foo</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
Foo<span class="token punctuation">.</span>prop <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">new</span><span class="token punctuation">.</span>target属性<span class="token punctuation">;</span>
可以判断方法被执行的时候是不是被<span class="token keyword">new</span>出来的<span class="token punctuation">;</span>
还是直接执行的<span class="token punctuation">;</span>
</code></pre></div><h1 id="class-的继承"><a href="#class-的继承" class="header-anchor">#</a> Class 的继承</h1> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">super</span>关键字
constructor方法和toString方法之中，都出现了<span class="token keyword">super</span>关键字，它在这里表示父类的构造函数，用来新建父类的<span class="token keyword">this</span>对象。
子类必须在constructor方法中调用<span class="token keyword">super</span>方法，否则新建实例时会报错。这是因为子类没有自己的<span class="token keyword">this</span>对象，而是继承父类的<span class="token keyword">this</span>对象，然后对其进行加工。如果不调用<span class="token keyword">super</span>方法，子类就得不到<span class="token keyword">this</span>对象。
重点：
<span class="token number">1</span>、<span class="token keyword">this</span>是调用子类的方法
<span class="token number">2</span>、<span class="token keyword">super</span>是调用父类的方法
<span class="token number">3</span>、子类的constructor方法中的<span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span>方法是调用父类的constructor方法
<span class="token number">4</span>、子类的构造函数中，只有调用<span class="token keyword">super</span>之后，才可以使用<span class="token keyword">this</span>关键字，否则会报错。这是因为子类实例的构建，是基于对父类实例加工，只有<span class="token keyword">super</span>方法才能返回父类实例

<span class="token keyword">class</span> <span class="token class-name">Point</span> <span class="token punctuation">{</span>
    <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;qew&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">ColorPoint</span> <span class="token keyword">extends</span> <span class="token class-name">Point</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> color</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 调用父类的constructor(x, y)</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>color<span class="token punctuation">)</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>color <span class="token operator">=</span> color<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>color <span class="token operator">+</span> <span class="token string">' '</span> <span class="token operator">+</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 调用父类的toString()</span>
    <span class="token punctuation">}</span>

    <span class="token function">mix</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> qqq <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ColorPoint</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span>
qqq<span class="token punctuation">.</span><span class="token function">mix</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>es5的继承方式
<span class="token number">1</span>、创造子类的实例对象<span class="token keyword">this</span>
<span class="token number">2</span>、将父类的方法添加到<span class="token keyword">this</span><span class="token function">上面</span><span class="token punctuation">(</span><span class="token function">Parent</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

es6的继承方式
<span class="token number">1</span>、先创造父类的实例对象<span class="token keyword">this</span>（所以必须先调用<span class="token keyword">super</span>方法）
<span class="token number">2</span>、再用子类的构造函数修改<span class="token keyword">this</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">super</span> 关键字
<span class="token number">1</span>、<span class="token keyword">super</span>作为函数调用时，代表父类的构造函数。<span class="token constant">ES6</span> 要求，子类的构造函数必须执行一次<span class="token keyword">super</span>函数。
<span class="token number">2</span>、<span class="token keyword">super</span><span class="token function">作为对象时，在普通方法中，指向父类的原型对象；在静态方法</span><span class="token punctuation">(</span><span class="token keyword">static</span><span class="token punctuation">)</span>中，指向父类。
<span class="token number">3</span>、通过<span class="token keyword">super</span>调用父类的方法时，<span class="token keyword">super</span>会绑定子类的<span class="token keyword">this</span>。
<span class="token number">4</span>、<span class="token keyword">super</span> 对象只可以调用父类上prototype下的属性和方法
</code></pre></div><h3 id="类的-prototype-属性和proto属性"><a href="#类的-prototype-属性和proto属性" class="header-anchor">#</a> 类的 prototype 属性和<strong>proto</strong>属性</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token number">1</span>、子类的__proto__属性，表示构造函数的继承，总是指向父类。
<span class="token number">2</span>、子类prototype属性的__proto__属性，表示方法的继承，总是指向父类的prototype属性。
</code></pre></div><h3 id="extends-的继承目标"><a href="#extends-的继承目标" class="header-anchor">#</a> extends 的继承目标</h3> <h3 id="实例的-proto-属性"><a href="#实例的-proto-属性" class="header-anchor">#</a> 实例的 <strong>proto</strong> 属性</h3> <h3 id="原生构造函数的继承"><a href="#原生构造函数的继承" class="header-anchor">#</a> 原生构造函数的继承</h3> <div class="language-js extra-class"><pre class="language-js"><code>原生构造函数是指语言内置的构造函数，通常用来生成数据结构。ECMAScript 的原生构造函数大致有下面这些。
<span class="token function">Boolean</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token function">Number</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token function">String</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token function">Array</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token function">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token function">Function</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token function">RegExp</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token function">Error</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token function">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
以前，这些原生构造函数是无法继承的
现在可以使用<span class="token keyword">extends</span>继承
</code></pre></div><h1 id="修饰器-es2017"><a href="#修饰器-es2017" class="header-anchor">#</a> 修饰器(ES2017)</h1> <p>1、类的修饰</p> <div class="language-js extra-class"><pre class="language-js"><code>为类添加新的属性方法<span class="token punctuation">;</span>
</code></pre></div><h1 id="module-的语法"><a href="#module-的语法" class="header-anchor">#</a> Module 的语法</h1> <h3 id="_1、概述"><a href="#_1、概述" class="header-anchor">#</a> 1、概述</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token number">1</span>、<span class="token constant">ES6</span> 模块的设计思想，是尽量的静态化

<span class="token number">2</span>、CommonJS 和 <span class="token constant">AMD</span> 模块，都只能在运行时确定这些东西
	<span class="token keyword">let</span> <span class="token punctuation">{</span> stat<span class="token punctuation">,</span> exists<span class="token punctuation">,</span> readFile <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	整体加载fs模块（即加载fs的所有方法），生成一个对象（_fs），然后再从这个对象上面读取<span class="token number">3</span>个方法。这种加载称为“运行时加载”，因为只有运行时才能得到这个对象，导致完全没办法在编译时做“静态优化”。

<span class="token number">3</span>、通过<span class="token keyword">export</span>命令显式指定输出的代码，再通过<span class="token keyword">import</span>命令输入。
	<span class="token keyword">import</span> <span class="token punctuation">{</span> stat<span class="token punctuation">,</span> exists<span class="token punctuation">,</span> readFile <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'fs'</span><span class="token punctuation">;</span>
	从fs模块加载<span class="token number">3</span>个方法，其他方法不加载。这种加载称为“编译时加载”或者静态加载，效率要比 CommonJS 模块的加载方式高
</code></pre></div><h3 id="_3、export-命令"><a href="#_3、export-命令" class="header-anchor">#</a> 3、export 命令</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span>命令用于规定模块的对外接口
<span class="token keyword">import</span>命令用于输入其他模块提供的功能。
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span>写法
<span class="token number">1</span>、<span class="token keyword">export</span> <span class="token keyword">var</span> firstName <span class="token operator">=</span> <span class="token string">'Michael'</span><span class="token punctuation">;</span>
	<span class="token keyword">export</span> <span class="token keyword">var</span> lastName <span class="token operator">=</span> <span class="token string">'Jackson'</span><span class="token punctuation">;</span>
<span class="token number">2</span>、<span class="token keyword">var</span> firstName <span class="token operator">=</span> <span class="token string">'Michael'</span><span class="token punctuation">;</span>
	<span class="token keyword">var</span> lastName <span class="token operator">=</span> <span class="token string">'Jackson'</span><span class="token punctuation">;</span>
	<span class="token keyword">export</span> <span class="token punctuation">{</span>firstName<span class="token punctuation">,</span> lastName<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token number">3</span>、<span class="token keyword">export</span>还可以直接输出类或者方法
<span class="token number">4</span>、使用<span class="token keyword">as</span>关键字重命名
	<span class="token keyword">export</span> <span class="token punctuation">{</span>
	  v1 <span class="token keyword">as</span> streamV1<span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_4、import-命令"><a href="#_4、import-命令" class="header-anchor">#</a> 4、import 命令</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token number">1</span>、<span class="token keyword">import</span> <span class="token punctuation">{</span>firstName<span class="token punctuation">,</span> lastName<span class="token punctuation">,</span> year<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./profile'</span><span class="token punctuation">;</span>
<span class="token number">2</span>、<span class="token keyword">import</span> <span class="token punctuation">{</span> lastName <span class="token keyword">as</span> surname <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./profile'</span><span class="token punctuation">;</span>
<span class="token number">3</span>、<span class="token keyword">import</span>命令是编译阶段执行的，在代码运行之前
<span class="token number">4</span>、<span class="token keyword">import</span>是静态执行，所以不能使用表达式和变量，这些只有在运行时才能得到结果的语法结构。
<span class="token number">5</span>、<span class="token keyword">import</span> <span class="token string">'lodash'</span><span class="token punctuation">;</span>
	仅仅执行lodash模块
</code></pre></div><h3 id="_5、模块的整体加载"><a href="#_5、模块的整体加载" class="header-anchor">#</a> 5、模块的整体加载</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> circle <span class="token keyword">from</span> <span class="token string">'./circle'</span><span class="token punctuation">;</span>
将circle这个文件的输出（类、方法、变量）全部定义到circle这个对象下面
</code></pre></div><h3 id="_6、export-default-命令"><a href="#_6、export-default-命令" class="header-anchor">#</a> 6、export default 命令</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;foo&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
加载的时候可以指定任意名字<span class="token punctuation">;</span>
</code></pre></div><h3 id="_7、export-与-import-的复合写法"><a href="#_7、export-与-import-的复合写法" class="header-anchor">#</a> 7、export 与 import 的复合写法</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token punctuation">{</span> foo<span class="token punctuation">,</span> bar <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;my_module&quot;</span><span class="token punctuation">;</span>
<span class="token comment">// 等同于</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> foo<span class="token punctuation">,</span> bar <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;my_module&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token punctuation">{</span> foo<span class="token punctuation">,</span> bar <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h1 id="module-的加载实现"><a href="#module-的加载实现" class="header-anchor">#</a> Module 的加载实现</h1> <h4 id="_1、浏览器加载"><a href="#_1、浏览器加载" class="header-anchor">#</a> 1、浏览器加载</h4> <div class="language-js extra-class"><pre class="language-js"><code>defer：渲染完再执行、如果有多个defer脚本，会按照它们在页面出现的顺序加载
<span class="token keyword">async</span>：下载完就执行、不能保证加载顺序
浏览器对于带有type<span class="token operator">=</span><span class="token string">&quot;module&quot;</span>的<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>，都是异步加载
等同于打开了<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>标签的defer属性
</code></pre></div><h4 id="_2、es6-模块与-commonjs-模块的差异"><a href="#_2、es6-模块与-commonjs-模块的差异" class="header-anchor">#</a> 2、ES6 模块与 CommonJS 模块的差异</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token number">1</span>、CommonJS 模块输出的是一个值的拷贝，<span class="token constant">ES6</span> 模块输出的是值的引用。
<span class="token number">2</span>、CommonJS 模块是运行时加载，<span class="token constant">ES6</span> 模块是编译时输出接口。
CommonJS 模块输出的是值的拷贝
<span class="token keyword">import</span>	<span class="token function">模块输出的值是引用值</span><span class="token punctuation">(</span>
	所有的变量与类都是引用的同一个
<span class="token punctuation">)</span>

</code></pre></div><h4 id="_3、node-加载（es6-模块加载与-commonjs-的差异）"><a href="#_3、node-加载（es6-模块加载与-commonjs-的差异）" class="header-anchor">#</a> 3、Node 加载（es6 模块加载与 commonJS 的差异）</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token number">1</span>、Node 对 <span class="token constant">ES6</span> 模块的处理比较麻烦
	CommonJS 模块格式，与 <span class="token constant">ES6</span> 模块格式是不兼容的
	目前的解决方案是，将两者分开，<span class="token constant">ES6</span> 模块和 CommonJS 采用各自的加载方案
<span class="token number">2</span>、在静态分析阶段，一个模块脚本只要有一行<span class="token keyword">import</span>或<span class="token keyword">export</span>语句，Node 就会认	为该脚本为 <span class="token constant">ES6</span> 模块，否则就为 CommonJS 模块
<span class="token number">3</span>、如果不输出任何接口，但是希望被 Node 认为是 <span class="token constant">ES6</span> 模块，可以在脚本中加一行	语句。
	<span class="token keyword">export</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token number">4</span>、<span class="token constant">ES6</span> 模块之中，顶层的<span class="token keyword">this</span>指向<span class="token keyword">undefined</span>；CommonJS 模块的顶层<span class="token keyword">this</span>指向当前模块，这是两者的一个重大差异。
<span class="token number">5</span>、module<span class="token punctuation">.</span>exports等同于<span class="token keyword">export</span> <span class="token keyword">default</span>、只能输出一次。
</code></pre></div><h4 id="_4、import-命令加载-commonjs-模块"><a href="#_4、import-命令加载-commonjs-模块" class="header-anchor">#</a> 4、import 命令加载 CommonJS 模块</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token number">1</span>、CommonJS 模块输出都定义在module<span class="token punctuation">.</span>exports这个属性上面
<span class="token number">2</span>、使用<span class="token keyword">import</span>命令加载 CommonJS 模块，Node 会自动将module<span class="token punctuation">.</span>exports属性，当作模块的默认输出，即等同于<span class="token keyword">export</span> <span class="token keyword">default</span>
</code></pre></div><h4 id="_5、require-命令加载-es6-模块"><a href="#_5、require-命令加载-es6-模块" class="header-anchor">#</a> 5、require 命令加载 ES6 模块</h4> <div class="language-js extra-class"><pre class="language-js"><code>require在家es6模块时，会把该模块中的所有属性方法成为输入对象的属性
</code></pre></div><h4 id="_6、循环加载"><a href="#_6、循环加载" class="header-anchor">#</a> 6、循环加载</h4> <div class="language-js extra-class"><pre class="language-js"><code>CommonJS模块的加载原理
<span class="token number">1</span>、CommonJS的一个模块，就是一个脚本文件。require命令第一次加载该脚本，就会执行整个脚本，然后在内存生成一个对象
<span class="token number">2</span>、由于CommonJS模块遇到循环加载时，返回的是当前已经执行的部分的值，而不是代码全部执行后的值，两者可能会有差异。所以，输入变量的时候，必须非常小心。
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token constant">ES6</span> 模块的循环加载
<span class="token constant">ES6</span>模块是动态引用，如果使用<span class="token keyword">import</span>从一个模块加载变量（即<span class="token keyword">import</span> foo <span class="token keyword">from</span> <span class="token string">'foo'</span>），那些变量不会被缓存，而是成为一个指向被加载模块的引用，需要开发者自己保证，真正取值的时候能够取到值。
</code></pre></div><h1 id="编程风格"><a href="#编程风格" class="header-anchor">#</a> 编程风格</h1> <h4 id="_1、块级作用域"><a href="#_1、块级作用域" class="header-anchor">#</a> 1、块级作用域</h4> <div class="language-js extra-class"><pre class="language-js"><code>（<span class="token number">1</span>）<span class="token keyword">let</span> 取代 <span class="token keyword">var</span>
（<span class="token number">2</span>）全局常量和线程安全
	在<span class="token keyword">let</span>和<span class="token keyword">const</span>之间，建议优先使用<span class="token keyword">const</span>，尤其是在全局环境，不应该设置变量，只应设置常量。
</code></pre></div><h4 id="_2、字符串"><a href="#_2、字符串" class="header-anchor">#</a> 2、字符串</h4> <div class="language-js extra-class"><pre class="language-js"><code>静态字符串一律使用单引号或反引号，不使用双引号。动态字符串使用反引号。
`反引号内可以使用$<span class="token punctuation">{</span><span class="token punctuation">}</span>来设置变量
<span class="token keyword">const</span> b <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">foo</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>a<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">bar</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
</code></pre></div><h4 id="_3、解构赋值"><a href="#_3、解构赋值" class="header-anchor">#</a> 3、解构赋值</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token number">1</span>、使用数组成员对变量赋值时，优先使用解构赋值。
	数组：<span class="token keyword">const</span> <span class="token punctuation">[</span>first<span class="token punctuation">,</span> second<span class="token punctuation">]</span> <span class="token operator">=</span> arr<span class="token punctuation">;</span>
	对象：<span class="token keyword">const</span> <span class="token punctuation">{</span> firstName<span class="token punctuation">,</span> lastName <span class="token punctuation">}</span> <span class="token operator">=</span> obj<span class="token punctuation">;</span><span class="token punctuation">(</span>obj中必须包含这两key值<span class="token punctuation">)</span>
    <span class="token comment">// best</span>
    <span class="token keyword">function</span> <span class="token function">getFullName</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> firstName<span class="token punctuation">,</span> lastName <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
<span class="token number">2</span>、对函数返回对象的解构赋值
    <span class="token keyword">function</span> <span class="token function">processInput</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> left <span class="token operator">=</span> <span class="token punctuation">{</span>
            name<span class="token operator">:</span><span class="token number">1</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token keyword">let</span> right <span class="token operator">=</span> <span class="token punctuation">{</span>
            name<span class="token operator">:</span><span class="token number">2</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span> left<span class="token punctuation">,</span> right <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span>left<span class="token punctuation">,</span>right<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">processInput</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="_4、对象"><a href="#_4、对象" class="header-anchor">#</a> 4、对象</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token number">1</span>、单行定义的对象，最后一个成员不以逗号结尾。多行定义的对象，最后一个成员以逗号结尾。
    <span class="token comment">// good</span>
    <span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token punctuation">{</span> k1<span class="token operator">:</span> v1<span class="token punctuation">,</span> k2<span class="token operator">:</span> v2 <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> b <span class="token operator">=</span> <span class="token punctuation">{</span>
      k1<span class="token operator">:</span> v1<span class="token punctuation">,</span>
      k2<span class="token operator">:</span> v2<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token number">2</span>、对象尽量静态化，一旦定义，就不得随意添加新的属性。如果添加属性不可避免，要使用Object<span class="token punctuation">.</span>assign方法。
<span class="token number">3</span>、如果对象的属性名是动态的，可以在创造对象的时候，使用属性表达式定义。
<span class="token number">4</span>、对象的属性和方法，尽量采用简洁表达法，这样易于描述和书写。
    <span class="token keyword">var</span> ref <span class="token operator">=</span> <span class="token string">'some value'</span><span class="token punctuation">;</span>
      <span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
      ref
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="_5、数组"><a href="#_5、数组" class="header-anchor">#</a> 5、数组</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token number">1</span>、使用扩展运算符（<span class="token operator">...</span>）拷贝数组。
<span class="token number">2</span>、使用Array<span class="token punctuation">.</span>from方法，将类似数组的对象转为数组。
</code></pre></div><h4 id="_6、函数"><a href="#_6、函数" class="header-anchor">#</a> 6、函数</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token number">1</span><span class="token function">、立即执行函数可以写成箭头函数的形式。</span>
  <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Welcome to the Internet.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token number">2</span>、箭头函数中的<span class="token keyword">this</span>与普通函数中的<span class="token keyword">this</span><span class="token punctuation">(</span>调用和定义的区别<span class="token punctuation">)</span>
	箭头函数中的<span class="token keyword">this</span>
	<span class="token number">1</span>、总是代表它的直接调用者<span class="token punctuation">,</span> 例如 obj<span class="token punctuation">.</span>func <span class="token punctuation">,</span>那么func中的<span class="token keyword">this</span>就是obj
	<span class="token number">2</span><span class="token function">、在默认情况</span><span class="token punctuation">(</span>非严格模式下<span class="token punctuation">,</span>未使用 <span class="token string">'use strict'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>没找到直接调用者<span class="token punctuation">,</span>则<span class="token keyword">this</span>指的是 window
	<span class="token number">3</span>、在严格模式下<span class="token punctuation">,</span>没有直接调用者的函数中的<span class="token keyword">this</span>是 <span class="token keyword">undefined</span>
	<span class="token number">4</span>、使用call<span class="token punctuation">,</span>apply<span class="token punctuation">,</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token constant">ES5</span>新增<span class="token punctuation">)</span>绑定的<span class="token punctuation">,</span><span class="token keyword">this</span>指的是 绑定的对象

	普通函数中的<span class="token keyword">this</span>
	<span class="token number">1</span>、函数被定义时的<span class="token keyword">this</span>指向
</code></pre></div><h4 id="_7、map-结构"><a href="#_7、map-结构" class="header-anchor">#</a> 7、Map 结构</h4> <div class="language-js extra-class"><pre class="language-js"><code>注意区分Object和Map，只有模拟现实世界的实体对象时，才使用Object。如果只是需要key<span class="token operator">:</span> value的数据结构，使用Map结构。因为Map有内建的遍历机制。
</code></pre></div><h4 id="_8、class"><a href="#_8、class" class="header-anchor">#</a> 8、class</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token number">1</span>、总是用Class，取代需要prototype的操作。因为Class的写法更简洁，更易于理解。
<span class="token number">2</span>、使用<span class="token keyword">extends</span>实现继承，因为这样更简单，不会有破坏<span class="token keyword">instanceof</span>运算的危险。
</code></pre></div><h4 id="_9、模块"><a href="#_9、模块" class="header-anchor">#</a> 9、模块</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token number">1</span>、Module语法是JavaScript模块的标准写法，坚持使用这种写法。使用<span class="token keyword">import</span>取代require。
<span class="token number">2</span>、使用<span class="token keyword">export</span>取代module<span class="token punctuation">.</span>exports。
<span class="token number">3</span>、如果模块只有一个输出值，就使用<span class="token keyword">export</span> <span class="token keyword">default</span>
<span class="token number">4</span>、如果模块默认输出一个函数，函数名的首字母应该小写。
<span class="token number">5</span>、如果模块默认输出一个对象，对象名的首字母应该大写。
</code></pre></div><h4 id="_10、eslint-的使用"><a href="#_10、eslint-的使用" class="header-anchor">#</a> 10、ESLint 的使用</h4> <div class="language-js extra-class"><pre class="language-js"><code>ESLint是一个语法规则和代码风格的检查工具，可以用来保证写出语法正确、风格统一的代码。
</code></pre></div><h1 id="读懂-ecmascript-规格"><a href="#读懂-ecmascript-规格" class="header-anchor">#</a> 读懂 ECMAScript 规格</h1></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/shimingw/vpblog/edit/master/docs/JavaScript/01.ES6/01.ES6.md" target="_blank" rel="noopener noreferrer">在 GitHub 上编辑此页</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">更新于:</span> <span class="time">2020-1-28 10:17:52 PM</span></div></footer> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/docs/2019-06-06-JavaScript-React-React学习笔记/">
        React学习笔记
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><div class="pace  pace-inactive" style="display:none;" data-v-57a75e74><div data-progress-text="100%" data-progress="99" class="pace-progress" style="transform:translate3d(0%, 0px, 0px);" data-v-57a75e74><div class="pace-progress-inner" data-v-57a75e74></div></div></div><div class="my-popup" style="display:none;" data-v-3414bdeb><div class="my-popup-container" data-v-3414bdeb><div class="my-popup-exit" data-v-3414bdeb></div> <img src="" alt data-v-3414bdeb></div></div><!----><!----><div></div></div></div>
    <script src="/assets/js/app.01f3d281.js" defer></script><script src="/assets/js/2.8423ab85.js" defer></script><script src="/assets/js/24.807bc40c.js" defer></script><script src="/assets/js/5.d4f27e5e.js" defer></script>
  </body>
</html>
